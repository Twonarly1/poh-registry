"use strict";
// Copyright (c) 2020,2021,2022, StepZen, Inc.
Object.defineProperty(exports, "__esModule", { value: true });
const errors_1 = require("@oclif/errors");
const sdk_1 = require("@stepzen/sdk");
const constants_1 = require("./constants");
const { version } = require('../../package.json');
const stepzen = Object.assign(Object.assign({}, sdk_1.init({ appName: `stepzen-cli/${version}` })), { login: async (adminkey, account = adminkey.split(':')[0]) => {
        try {
            const client = await stepzen.client({
                account,
                adminkey,
                domain: constants_1.STEPZEN_DOMAIN,
                server: constants_1.STEPZEN_SERVER_URL,
            });
            return client.credentials;
        }
        catch (error) {
            // Exit, with error
            throw new errors_1.CLIError('We are unable to verify your account details. Could you please check them?' +
                ` (${error})`);
        }
    }, createAnonymousAccount: async (uuid) => {
        try {
            const client = await stepzen.client({
                publicAccountToken: uuid,
                domain: constants_1.STEPZEN_DOMAIN,
                server: constants_1.STEPZEN_SERVER_URL,
            });
            return client.credentials;
        }
        catch (error) {
            throw new errors_1.CLIError(`Could not create a public account (${error})`);
        }
    } });
exports.default = stepzen;
