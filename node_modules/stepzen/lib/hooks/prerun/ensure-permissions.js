"use strict";
// Copyright (c) 2020,2021,2022, StepZen, Inc.
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const path = require("path");
const constants_1 = require("../../shared/constants");
const constants_2 = require("../../shared/constants");
const hook = async function () {
    //  checking file existence and permissions (https://betterprogramming.pub/dbce0f2b373c)
    const file = path.join(constants_2.STEPZEN_CONFIG_DIRECTORY, constants_1.STEPZEN_CONFIG_FILE);
    try {
        fs.accessSync(file, fs.constants.F_OK | fs.constants.R_OK | fs.constants.W_OK);
        const mode = fs.statSync(file).mode;
        //  https://stackoverflow.com/questions/50839744/how-to-interpret-the-number-returned-from-statsync
        if (mode & (fs.constants.S_IRWXG | fs.constants.S_IRWXG))
            fs.chmodSync(file, fs.constants.S_IRWXU);
    }
    catch (error) { }
};
exports.default = hook;
