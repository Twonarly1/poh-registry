"use strict";
// Copyright (c) 2020,2021,2022, StepZen, Inc.
Object.defineProperty(exports, "__esModule", { value: true });
const chalk = require("chalk");
const command_1 = require("@oclif/command");
const errors_1 = require("@oclif/errors");
const utils_1 = require("../shared/utils");
const zen_command_1 = require("../shared/zen-command");
const { stitch, validate } = require('@stepzen/transpiler');
class Validate extends zen_command_1.default {
    async run() {
        const { args } = this.parse(Validate);
        const folder = utils_1.getDirectory(args.folder);
        try {
            const schema = stitch(folder);
            validate(schema, {
                extensions: await utils_1.getStepZenExtensions(),
            });
        }
        catch (error) {
            throw new errors_1.CLIError(chalk.red(error));
        }
    }
}
exports.default = Validate;
Validate.description = 'validate a graphql schema';
Validate.hidden = true;
Validate.flags = Object.assign(Object.assign({}, zen_command_1.default.flags), { help: command_1.flags.help({ char: 'h' }) });
Validate.args = [
    {
        name: 'folder',
        required: true,
    },
];
