"use strict";
// Copyright (c) 2020,2021,2022, StepZen, Inc.
Object.defineProperty(exports, "__esModule", { value: true });
const command_1 = require("@oclif/command");
const utils_1 = require("../shared/utils");
const zen_command_1 = require("../shared/zen-command");
const { lint } = require('@stepzen/transpiler');
class Init extends zen_command_1.default {
    async run() {
        const { flags } = this.parse(Init);
        // Get the correct directory
        const directory = utils_1.getDirectory(flags.dir);
        this.log(directory);
        // Take over console.log
        console.log = (msg) => {
            let formatted = msg;
            formatted = formatted.replace(/  +/g, ' ');
            this.log(formatted);
        };
        // Lint
        await lint(directory);
    }
}
exports.default = Init;
Init.description = 'stepzen lint';
Init.hidden = true;
Init.flags = Object.assign(Object.assign({}, zen_command_1.default.flags), { dir: command_1.flags.string({ hidden: true }), help: command_1.flags.help({ char: 'h' }) });
