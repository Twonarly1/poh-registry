"use strict";
// Copyright (c) 2020,2021,2022, StepZen, Inc.
Object.defineProperty(exports, "__esModule", { value: true });
exports.getRequestHeaders = exports.getUserAgent = void 0;
const os = require("os");
const isWsl = require("is-wsl");
const { version } = require('../../package.json');
// mimics the logic from @oclif/config
// https://github.com/oclif/core/blob/d7067d13c7d80c9e0064455c27ac1ebb6ee53fd2/src/config/config.ts#L128
const arch = os.arch() === 'ia32' ? 'x86' : os.arch();
const platform = isWsl ? 'wsl' : os.platform();
const getUserAgent = (sdkConfig) => {
    return `${sdkConfig.appName} stepzen-sdk/${version} (${platform}; ${arch}; node-${process.version})`;
};
exports.getUserAgent = getUserAgent;
const getRequestHeaders = (account, sdkConfig) => {
    return {
        authorization: `Apikey ${account.adminkey}`,
        host: `${account.account}.${account.domain}`,
        'stepzen-cli-version': version,
        'user-agent': exports.getUserAgent(sdkConfig),
    };
};
exports.getRequestHeaders = getRequestHeaders;
//# sourceMappingURL=request.js.map